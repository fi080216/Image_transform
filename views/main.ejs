<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Image Transform App</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 600px;
        margin: auto;
        padding: 50px;
        text-align: center;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
    </style>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="main" style="display: flex; gap: 20px; width: 700px;">
      <!-- Image Upload Form -->
    <div >
      <form action="/upload" method="POST" enctype="multipart/form-data">
        <div
          style="
            background-color: rgb(214, 216, 221);
            
            padding-left: 10px;
            padding-right: 10px;
            padding-bottom: 10px;
            border-radius: 2%;
            width: 100%;
          "
        >
          <h3 style="text-align: center">Upload and Transform Image</h3>
          <input
            style="
              background-color: rgb(241, 241, 245);
              font-weight: 500;
              margin-top: 35px;
            "
            class="form-control"
            type="file"
            name="Image"
            id="formFile"
            required
          />
        </div>
        <button
          style="
            color: white;
            background-color: rgb(84, 84, 231);
            font-weight: 500;
            margin-top: 30px;
          "
          type="submit"
          class="form-control"
          id="formFile"
        >
          Upload
        </button>
      </form>

      <% if (fileId) { %>

      <!-- Transformation Form -->
      
        <form  action="/files/<%= fileId %>" method="GET">
        
          <h3 style="text-align: center;">Apply Transformations</h3>

          <h5>Width: <input class="form-control" style="border-color: black;"
            id="formFile" type="number" name="width" min="1" /></h5>
          <h5>Height: <input class="form-control" style="border-color: black;"
            
            id="formFile" type="number" name="height" min="1" /></h5>

          <h5>
            Format:
            <select class="form-control" style="border-color: black;"
            id="formFile" name="format">
              <option  value="">Original</option>
              <option value="png">PNG</option>
              <option value="webp">WEBP</option>
            </select>
          </h5>

          <h5>
            Filter:
            <select class="form-control" style="border-color: black;"
            id="formFile" name="filter">
              <option value="">None</option>
              <option value="grayscale">Grayscale</option>
              <option value="blur">Blur</option>
              <option value="brightness">Brightness</option>
            </select>
        </h5>
        
    </div>
    <div>

          <h3>Preview:</h3>
          <img style="width: 100%;" src="/files/<%= fileId %>" alt="Transformed Image" />
          <input type="hidden" name="download" value="true" />
          <button class="form-control"
          id="formFile" style="margin-top: 20px; color: white;
          background-color: rgb(84, 84, 231);
          font-weight: 500;" type="submit">Download transformed Image</button>
        
        </form>
      </div>

      <% } %>
      <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"
      ></script>
    </div>
  </body>
</html>
